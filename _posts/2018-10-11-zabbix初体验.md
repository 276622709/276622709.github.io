听说最近zabbix更新到4.0版本了，赶紧下载安装实验一下功能  
系统环境是CentOS Linux release 7.2.1511 (Core)
本来想要跟随着官网document搭建，但是官网文档只有3.4版本，因此就跟着3.4的版本来，操作的时候就安装包名称路径由3.4换成4.0就可以了  
由于centos7开始安装的mysql默认为miriadb,自己看起来别扭还是下载mysql原生版本用起来比较自然  
``` code 
wget https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm  #下载官网repo安装文件  
rpm -ivh mysql57-community-release-el7-9.noarch.rpm  #安装repo文件  
yum install mysql-server -y  #yum安装  
systemctl start mysqld  #启动mysql服务  
systemctl enable mysqld #设置开机启动  
grep 'temporary password' /var/log/mysqld.log #获取安装时的临时密码  
(这里可能有之前安装过mysql的，在这一步获取不到临时密码，下面是解决办法  
rm -rf /var/lib/mysql  #删除原来mysql残留的数据  
systemctl restart mysqld  #重启mysql服务  
grep 'temporary password' /var/log/mysqld.log  #再去找临时密码)  
mysql -u root -p      #登录，提示输入密码，输入之前在/var/log/mysqld.log中获取的临时密码 
set password=password("yourpassword");  #登录成功后修改密码
```
以上步骤只是成功安装mysql5.7并初始化root账户设置密码，下面开始进入zabbix的安装与配置  
```code
rpm -ivh http://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm #安装zabbix yum源  
yum install zabbix-server-mysql zabbix-web-mysql -y #安装zabbix安装包
```
在mysql上安装zabbix数据库和用户(password换成自己设置的密码)
```code
mysql -u root -p<password> #登录mysql  
create database zabbix character set utf8 collate utf8_bin; #设置zabbix编码方式为utf-8  
grant all privileges on zabbix.* to zabbix@localhost identified by '<password>';  #授权zabbix用户权限  
flush privileges;  #使权限设置生效
quit； 退出  
```
然后导入初始架构（Schema）和数据  
```code
cd /usr/share/doc/zabbix-server-mysql-4.0.0/
gzip -d create.sql.gz 
mysql -u root -p'yourpassword' zabbix < create.sql 
```
在zabbix_server.conf中编辑数据库配置
```code
#vi /etc/zabbix/zabbix_server.conf
DBHost=localhost
DBName=zabbix
DBUser=zabbix
DBPassword=yourpassword
```
启动Zabbix Server进程
```code
# systemctl start zabbix-server
```
编辑Zabbix前端的PHP配置  
Zabbix前端的Apache配置文件位于 /etc/httpd/conf.d/zabbix.conf 。一些PHP设置已经完成了配置。
```code
php_value max_execution_time 300
php_value memory_limit 128M
php_value post_max_size 16M
php_value upload_max_filesize 2M
php_value max_input_time 300
php_value always_populate_raw_post_data -1
# php_value date.timezone Asia/Shanghai
```
依据所在时区，你可以取消 “date.timezone” 设置的注释，并正确配置它。在配置文件更改后，需要重启Apache Web服务器,我这里配置为Asia/Shanghai。
```code
# systemctl start httpd
```
Zabbix前端可以在浏览器中通过 http://zabbix-frontend-hostname/zabbix 进行访问。默认的用户名／密码为 Admin/zabbix。  
登录zabbix后可以调整网页基础参数  
语言、背景颜色、刷新时间间隔、是否自动登录、多长时间没操作登出、每页行数  


